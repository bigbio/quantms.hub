"use strict";(self["webpackChunkquantms_org"]=self["webpackChunkquantms_org"]||[]).push([[75],{3624:(e,t,n)=>{n.d(t,{Zq:()=>q});var a=n(641),l=n(953),o=n(33),i=n(6668),s=n(7786),r=n(3753),c=n(3751),u=n(3366),d=n(3149),v="Expected a function";function f(e,t,n){var a=!0,l=!0;if("function"!=typeof e)throw new TypeError(v);return(0,d.A)(n)&&(a="leading"in n?!!n.leading:a,l="trailing"in n?!!n.trailing:l),(0,u.A)(e,t,{leading:a,maxWait:t,trailing:l})}const p=f;var m=n(5378),R=n(6543),k=n(1361),g=n(8548),b=n(819),y=n(1254),C=n(2154);const h=(0,b.b_)({urlList:{type:(0,b.jq)(Array),default:()=>(0,y.f)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:(0,b.jq)(String)}}),w={close:()=>!0,switch:e=>(0,C.Et)(e),rotate:e=>(0,C.Et)(e)};var E=n(8396),L=n(7404),x=n(5980),I=n(4656),_=n(3344),z=n(5158);const F=(0,a.pM)({name:"ElImageViewer"}),O=(0,a.pM)({...F,props:h,emits:w,setup(e,{expose:t,emit:n}){var i;const r=e,u={CONTAIN:{name:"contain",icon:(0,l.IG)(g.FullScreen)},ORIGINAL:{name:"original",icon:(0,l.IG)(g.ScaleToOriginal)}},{t:d}=(0,L.Ym)(),v=(0,x.DU)("image-viewer"),{nextZIndex:f}=(0,I.YK)(),b=(0,l.KR)(),y=(0,l.KR)([]),C=(0,l.uY)(),h=(0,l.KR)(!0),w=(0,l.KR)(r.initialIndex),E=(0,l.IJ)(u.CONTAIN),F=(0,l.KR)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),O=(0,l.KR)(null!=(i=r.zIndex)?i:f()),S=(0,a.EW)((()=>{const{urlList:e}=r;return e.length<=1})),A=(0,a.EW)((()=>0===w.value)),N=(0,a.EW)((()=>w.value===r.urlList.length-1)),W=(0,a.EW)((()=>r.urlList[w.value])),K=(0,a.EW)((()=>[v.e("btn"),v.e("prev"),v.is("disabled",!r.infinite&&A.value)])),T=(0,a.EW)((()=>[v.e("btn"),v.e("next"),v.is("disabled",!r.infinite&&N.value)])),X=(0,a.EW)((()=>{const{scale:e,deg:t,offsetX:n,offsetY:a,enableTransition:l}=F.value;let o=n/e,i=a/e;const s=t*Math.PI/180,r=Math.cos(s),c=Math.sin(s);o=o*r+i*c,i=i*r-n/e*c;const d={transform:`scale(${e}) rotate(${t}deg) translate(${o}px, ${i}px)`,transition:l?"transform .3s":""};return E.value.name===u.CONTAIN.name&&(d.maxWidth=d.maxHeight="100%"),d}));function M(){B(),n("close")}function Y(){const e=p((e=>{switch(e.code){case _.R.esc:r.closeOnPressEscape&&M();break;case _.R.space:Q();break;case _.R.left:P();break;case _.R.up:U("zoomIn");break;case _.R.right:Z();break;case _.R.down:U("zoomOut");break}})),t=p((e=>{const t=e.deltaY||e.deltaX;U(t<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})}));C.run((()=>{(0,s.MLh)(document,"keydown",e),(0,s.MLh)(document,"wheel",t)}))}function B(){C.stop()}function $(){h.value=!1}function q(e){h.value=!1,e.target.alt=d("el.image.error")}function j(e){if(h.value||0!==e.button||!b.value)return;F.value.enableTransition=!1;const{offsetX:t,offsetY:n}=F.value,a=e.pageX,l=e.pageY,o=p((e=>{F.value={...F.value,offsetX:t+e.pageX-a,offsetY:n+e.pageY-l}})),i=(0,s.MLh)(document,"mousemove",o);(0,s.MLh)(document,"mouseup",(()=>{i()})),e.preventDefault()}function G(){F.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Q(){if(h.value)return;const e=(0,z.YD)(u),t=Object.values(u),n=E.value.name,a=t.findIndex((e=>e.name===n)),l=(a+1)%e.length;E.value=u[e[l]],G()}function D(e){const t=r.urlList.length;w.value=(e+t)%t}function P(){A.value&&!r.infinite||D(w.value-1)}function Z(){N.value&&!r.infinite||D(w.value+1)}function U(e,t={}){if(h.value)return;const{minScale:a,maxScale:l}=r,{zoomRate:o,rotateDeg:i,enableTransition:s}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":F.value.scale>a&&(F.value.scale=Number.parseFloat((F.value.scale/o).toFixed(3)));break;case"zoomIn":F.value.scale<l&&(F.value.scale=Number.parseFloat((F.value.scale*o).toFixed(3)));break;case"clockwise":F.value.deg+=i,n("rotate",F.value.deg);break;case"anticlockwise":F.value.deg-=i,n("rotate",F.value.deg);break}F.value.enableTransition=s}function V(e){var t;"pointer"===(null==(t=e.detail)?void 0:t.focusReason)&&e.preventDefault()}function H(){r.closeOnPressEscape&&M()}return(0,a.wB)(W,(()=>{(0,a.dY)((()=>{const e=y.value[0];(null==e?void 0:e.complete)||(h.value=!0)}))})),(0,a.wB)(w,(e=>{G(),n("switch",e)})),(0,a.sV)((()=>{Y()})),t({setActiveItem:D}),(e,t)=>((0,a.uX)(),(0,a.Wv)((0,l.R1)(R.Nr),{to:"body",disabled:!e.teleported},{default:(0,a.k6)((()=>[(0,a.bF)(c.eB,{name:"viewer-fade",appear:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{ref_key:"wrapper",ref:b,tabindex:-1,class:(0,o.C4)((0,l.R1)(v).e("wrapper")),style:(0,o.Tr)({zIndex:O.value})},[(0,a.bF)((0,l.R1)(m.A),{loop:"",trapped:"","focus-trap-el":b.value,"focus-start-el":"container",onFocusoutPrevented:V,onReleaseRequested:H},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:(0,o.C4)((0,l.R1)(v).e("mask")),onClick:(0,c.D$)((t=>e.hideOnClickModal&&M()),["self"])},null,10,["onClick"]),(0,a.Q3)(" CLOSE "),(0,a.Lk)("span",{class:(0,o.C4)([(0,l.R1)(v).e("btn"),(0,l.R1)(v).e("close")]),onClick:M},[(0,a.bF)((0,l.R1)(k.tk),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.Close))])),_:1})],2),(0,a.Q3)(" ARROW "),(0,l.R1)(S)?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("span",{class:(0,o.C4)((0,l.R1)(K)),onClick:P},[(0,a.bF)((0,l.R1)(k.tk),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.ArrowLeft))])),_:1})],2),(0,a.Lk)("span",{class:(0,o.C4)((0,l.R1)(T)),onClick:Z},[(0,a.bF)((0,l.R1)(k.tk),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.ArrowRight))])),_:1})],2)],64)),(0,a.Q3)(" ACTIONS "),(0,a.Lk)("div",{class:(0,o.C4)([(0,l.R1)(v).e("btn"),(0,l.R1)(v).e("actions")])},[(0,a.Lk)("div",{class:(0,o.C4)((0,l.R1)(v).e("actions__inner"))},[(0,a.bF)((0,l.R1)(k.tk),{onClick:e=>U("zoomOut")},{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.ZoomOut))])),_:1},8,["onClick"]),(0,a.bF)((0,l.R1)(k.tk),{onClick:e=>U("zoomIn")},{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.ZoomIn))])),_:1},8,["onClick"]),(0,a.Lk)("i",{class:(0,o.C4)((0,l.R1)(v).e("actions__divider"))},null,2),(0,a.bF)((0,l.R1)(k.tk),{onClick:Q},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)((0,l.R1)(E).icon)))])),_:1}),(0,a.Lk)("i",{class:(0,o.C4)((0,l.R1)(v).e("actions__divider"))},null,2),(0,a.bF)((0,l.R1)(k.tk),{onClick:e=>U("anticlockwise")},{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.RefreshLeft))])),_:1},8,["onClick"]),(0,a.bF)((0,l.R1)(k.tk),{onClick:e=>U("clockwise")},{default:(0,a.k6)((()=>[(0,a.bF)((0,l.R1)(g.RefreshRight))])),_:1},8,["onClick"])],2)],2),(0,a.Q3)(" CANVAS "),(0,a.Lk)("div",{class:(0,o.C4)((0,l.R1)(v).e("canvas"))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.urlList,((t,n)=>(0,a.bo)(((0,a.uX)(),(0,a.CE)("img",{ref_for:!0,ref:e=>y.value[n]=e,key:t,src:t,style:(0,o.Tr)((0,l.R1)(X)),class:(0,o.C4)((0,l.R1)(v).e("img")),crossorigin:e.crossorigin,onLoad:$,onError:q,onMousedown:j},null,46,["src","crossorigin"])),[[c.aG,n===w.value]]))),128))],2),(0,a.RG)(e.$slots,"default")])),_:3},8,["focus-trap-el"])],6)])),_:3})])),_:3},8,["disabled"]))}});var S=(0,E.A)(O,[["__file","image-viewer.vue"]]),A=n(4769);const N=(0,A.GU)(S),W=(0,b.b_)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,b.jq)([String,Object])},previewSrcList:{type:(0,b.jq)(Array),default:()=>(0,y.f)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:(0,b.jq)(String)}}),K={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,C.Et)(e),close:()=>!0,show:()=>!0},T=(e,t)=>{if(!i.oc||!e||!t)return!1;const n=e.getBoundingClientRect();let a;return a=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<a.bottom&&n.bottom>a.top&&n.right>a.left&&n.left<a.right};var X=n(3205),M=n(1027);const Y=(0,a.pM)({name:"ElImage",inheritAttrs:!1}),B=(0,a.pM)({...Y,props:W,emits:K,setup(e,{emit:t}){const n=e;let c="";const{t:u}=(0,L.Ym)(),d=(0,x.DU)("image"),v=(0,a.OA)(),f=(0,a.EW)((()=>(0,r.A)(Object.entries(v).filter((([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))))),p=(0,X.O)({excludeListeners:!0,excludeKeys:(0,a.EW)((()=>Object.keys(f.value)))}),m=(0,l.KR)(),R=(0,l.KR)(!1),k=(0,l.KR)(!0),g=(0,l.KR)(!1),b=(0,l.KR)(),y=(0,l.KR)(),h=i.oc&&"loading"in HTMLImageElement.prototype;let w,E;const I=(0,a.EW)((()=>[d.e("inner"),z.value&&d.e("preview"),k.value&&d.is("loading")])),_=(0,a.EW)((()=>{const{fit:e}=n;return i.oc&&e?{objectFit:e}:{}})),z=(0,a.EW)((()=>{const{previewSrcList:e}=n;return(0,o.cy)(e)&&e.length>0})),F=(0,a.EW)((()=>{const{previewSrcList:e,initialIndex:t}=n;let a=t;return t>e.length-1&&(a=0),a})),O=(0,a.EW)((()=>"eager"!==n.loading&&(!h&&"lazy"===n.loading||n.lazy))),S=()=>{i.oc&&(k.value=!0,R.value=!1,m.value=n.src)};function A(e){k.value=!1,R.value=!1,t("load",e)}function W(e){k.value=!1,R.value=!0,t("error",e)}function K(){T(b.value,y.value)&&(S(),$())}const Y=(0,i.k3)(K,200,!0);async function B(){var e;if(!i.oc)return;await(0,a.dY)();const{scrollContainer:t}=n;(0,C.vq)(t)?y.value=t:(0,o.Kg)(t)&&""!==t?y.value=null!=(e=document.querySelector(t))?e:void 0:b.value&&(y.value=(0,M.Bo)(b.value)),y.value&&(w=(0,s.MLh)(y,"scroll",Y),setTimeout((()=>K()),100))}function $(){i.oc&&y.value&&Y&&(null==w||w(),y.value=void 0)}function q(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function j(){z.value&&(E=(0,s.MLh)("wheel",q,{passive:!1}),c=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0,t("show"))}function G(){null==E||E(),document.body.style.overflow=c,g.value=!1,t("close")}function Q(e){t("switch",e)}return(0,a.wB)((()=>n.src),(()=>{O.value?(k.value=!0,R.value=!1,$(),B()):S()})),(0,a.sV)((()=>{O.value?B():S()})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",(0,a.v6)({ref_key:"container",ref:b},(0,l.R1)(f),{class:[(0,l.R1)(d).b(),e.$attrs.class]}),[R.value?(0,a.RG)(e.$slots,"error",{key:0},(()=>[(0,a.Lk)("div",{class:(0,o.C4)((0,l.R1)(d).e("error"))},(0,o.v_)((0,l.R1)(u)("el.image.error")),3)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[void 0!==m.value?((0,a.uX)(),(0,a.CE)("img",(0,a.v6)({key:0},(0,l.R1)(p),{src:m.value,loading:e.loading,style:(0,l.R1)(_),class:(0,l.R1)(I),crossorigin:e.crossorigin,onClick:j,onLoad:A,onError:W}),null,16,["src","loading","crossorigin"])):(0,a.Q3)("v-if",!0),k.value?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,o.C4)((0,l.R1)(d).e("wrapper"))},[(0,a.RG)(e.$slots,"placeholder",{},(()=>[(0,a.Lk)("div",{class:(0,o.C4)((0,l.R1)(d).e("placeholder"))},null,2)]))],2)):(0,a.Q3)("v-if",!0)],64)),(0,l.R1)(z)?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[g.value?((0,a.uX)(),(0,a.Wv)((0,l.R1)(N),{key:0,"z-index":e.zIndex,"initial-index":(0,l.R1)(F),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:Q},{default:(0,a.k6)((()=>[e.$slots.viewer?((0,a.uX)(),(0,a.CE)("div",{key:0},[(0,a.RG)(e.$slots,"viewer")])):(0,a.Q3)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):(0,a.Q3)("v-if",!0)],64)):(0,a.Q3)("v-if",!0)],16))}});var $=(0,E.A)(B,[["__file","image.vue"]]);const q=(0,A.GU)($)},8746:(e,t,n)=>{n(6422)}}]);
//# sourceMappingURL=75.2592231f.js.map