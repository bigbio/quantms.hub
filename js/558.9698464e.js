"use strict";(self["webpackChunkquantms_org"]=self["webpackChunkquantms_org"]||[]).push([[558],{8600:(e,l,n)=>{n.d(l,{F8:()=>B});var t=n(6252),a=n(2262),o=n(3577),i=n(3299),s=n(6309),r=n(9963),c=n(8891),u=n(7226),d="Expected a function";function v(e,l,n){var t=!0,a=!0;if("function"!=typeof e)throw new TypeError(d);return(0,u.Z)(n)&&(t="leading"in n?!!n.leading:t,a="trailing"in n?!!n.trailing:a),(0,c.Z)(e,l,{leading:t,maxWait:l,trailing:a})}const f=v;var m=n(4181),p=n(5781),g=n(5027),w=n(5450),k=n(5162);const C=(0,g.o8)({urlList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),S={close:()=>!0,switch:e=>(0,k.hj)(e)};var _=n(1446),b=n(7774),y=n(9143),h=n(4568),U=n(4309),O=n(5437);const z=["src"],E=(0,t.aZ)({name:"ElImageViewer"}),I=(0,t.aZ)({...E,props:C,emits:S,setup(e,{expose:l,emit:n}){const i=e,c={CONTAIN:{name:"contain",icon:(0,a.Xl)(p.FullScreen)},ORIGINAL:{name:"original",icon:(0,a.Xl)(p.ScaleToOriginal)}},{t:u}=(0,b.bU)(),d=(0,y.s3)("image-viewer"),{nextZIndex:v}=(0,h.Cn)(),g=(0,a.iH)(),w=(0,a.iH)([]),C=(0,a.B)(),S=(0,a.iH)(!0),_=(0,a.iH)(i.initialIndex),E=(0,a.XI)(c.CONTAIN),I=(0,a.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),N=(0,t.Fl)((()=>{const{urlList:e}=i;return e.length<=1})),x=(0,t.Fl)((()=>0===_.value)),T=(0,t.Fl)((()=>_.value===i.urlList.length-1)),R=(0,t.Fl)((()=>i.urlList[_.value])),W=(0,t.Fl)((()=>[d.e("btn"),d.e("prev"),d.is("disabled",!i.infinite&&x.value)])),F=(0,t.Fl)((()=>[d.e("btn"),d.e("next"),d.is("disabled",!i.infinite&&T.value)])),D=(0,t.Fl)((()=>{const{scale:e,deg:l,offsetX:n,offsetY:t,enableTransition:a}=I.value;let o=n/e,i=t/e;switch(l%360){case 90:case-270:[o,i]=[i,-o];break;case 180:case-180:[o,i]=[-o,-i];break;case 270:case-90:[o,i]=[-i,o];break}const s={transform:`scale(${e}) rotate(${l}deg) translate(${o}px, ${i}px)`,transition:a?"transform .3s":""};return E.value.name===c.CONTAIN.name&&(s.maxWidth=s.maxHeight="100%"),s})),H=(0,t.Fl)((()=>(0,k.hj)(i.zIndex)?i.zIndex:v()));function L(){A(),n("close")}function Y(){const e=f((e=>{switch(e.code){case U.EVENT_CODE.esc:i.closeOnPressEscape&&L();break;case U.EVENT_CODE.space:Z();break;case U.EVENT_CODE.left:V();break;case U.EVENT_CODE.up:P("zoomIn");break;case U.EVENT_CODE.right:M();break;case U.EVENT_CODE.down:P("zoomOut");break}})),l=f((e=>{const l=e.deltaY||e.deltaX;P(l<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})}));C.run((()=>{(0,s.ORN)(document,"keydown",e),(0,s.ORN)(document,"wheel",l)}))}function A(){C.stop()}function q(){S.value=!1}function j(e){S.value=!1,e.target.alt=u("el.image.error")}function B(e){if(S.value||0!==e.button||!g.value)return;I.value.enableTransition=!1;const{offsetX:l,offsetY:n}=I.value,t=e.pageX,a=e.pageY,o=f((e=>{I.value={...I.value,offsetX:l+e.pageX-t,offsetY:n+e.pageY-a}})),i=(0,s.ORN)(document,"mousemove",o);(0,s.ORN)(document,"mouseup",(()=>{i()})),e.preventDefault()}function X(){I.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Z(){if(S.value)return;const e=(0,O.uc)(c),l=Object.values(c),n=E.value.name,t=l.findIndex((e=>e.name===n)),a=(t+1)%e.length;E.value=c[e[a]],X()}function $(e){const l=i.urlList.length;_.value=(e+l)%l}function V(){x.value&&!i.infinite||$(_.value-1)}function M(){T.value&&!i.infinite||$(_.value+1)}function P(e,l={}){if(S.value)return;const{zoomRate:n,rotateDeg:t,enableTransition:a}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...l};switch(e){case"zoomOut":I.value.scale>.2&&(I.value.scale=Number.parseFloat((I.value.scale/n).toFixed(3)));break;case"zoomIn":I.value.scale<7&&(I.value.scale=Number.parseFloat((I.value.scale*n).toFixed(3)));break;case"clockwise":I.value.deg+=t;break;case"anticlockwise":I.value.deg-=t;break}I.value.enableTransition=a}return(0,t.YP)(R,(()=>{(0,t.Y3)((()=>{const e=w.value[0];(null==e?void 0:e.complete)||(S.value=!0)}))})),(0,t.YP)(_,(e=>{X(),n("switch",e)})),(0,t.bv)((()=>{var e,l;Y(),null==(l=null==(e=g.value)?void 0:e.focus)||l.call(e)})),l({setActiveItem:$}),(e,l)=>((0,t.wg)(),(0,t.j4)(t.lR,{to:"body",disabled:!e.teleported},[(0,t.Wm)(r.uT,{name:"viewer-fade",appear:""},{default:(0,t.w5)((()=>[(0,t._)("div",{ref_key:"wrapper",ref:g,tabindex:-1,class:(0,o.C_)((0,a.SU)(d).e("wrapper")),style:(0,o.j5)({zIndex:(0,a.SU)(H)})},[(0,t._)("div",{class:(0,o.C_)((0,a.SU)(d).e("mask")),onClick:l[0]||(l[0]=(0,r.iM)((l=>e.hideOnClickModal&&L()),["self"]))},null,2),(0,t.kq)(" CLOSE "),(0,t._)("span",{class:(0,o.C_)([(0,a.SU)(d).e("btn"),(0,a.SU)(d).e("close")]),onClick:L},[(0,t.Wm)((0,a.SU)(m.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.Close))])),_:1})],2),(0,t.kq)(" ARROW "),(0,a.SU)(N)?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("span",{class:(0,o.C_)((0,a.SU)(W)),onClick:V},[(0,t.Wm)((0,a.SU)(m.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.ArrowLeft))])),_:1})],2),(0,t._)("span",{class:(0,o.C_)((0,a.SU)(F)),onClick:M},[(0,t.Wm)((0,a.SU)(m.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.ArrowRight))])),_:1})],2)],64)),(0,t.kq)(" ACTIONS "),(0,t._)("div",{class:(0,o.C_)([(0,a.SU)(d).e("btn"),(0,a.SU)(d).e("actions")])},[(0,t._)("div",{class:(0,o.C_)((0,a.SU)(d).e("actions__inner"))},[(0,t.Wm)((0,a.SU)(m.gn),{onClick:l[1]||(l[1]=e=>P("zoomOut"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.ZoomOut))])),_:1}),(0,t.Wm)((0,a.SU)(m.gn),{onClick:l[2]||(l[2]=e=>P("zoomIn"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.ZoomIn))])),_:1}),(0,t._)("i",{class:(0,o.C_)((0,a.SU)(d).e("actions__divider"))},null,2),(0,t.Wm)((0,a.SU)(m.gn),{onClick:Z},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)((0,a.SU)(E).icon)))])),_:1}),(0,t._)("i",{class:(0,o.C_)((0,a.SU)(d).e("actions__divider"))},null,2),(0,t.Wm)((0,a.SU)(m.gn),{onClick:l[3]||(l[3]=e=>P("anticlockwise"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.RefreshLeft))])),_:1}),(0,t.Wm)((0,a.SU)(m.gn),{onClick:l[4]||(l[4]=e=>P("clockwise"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(p.RefreshRight))])),_:1})],2)],2),(0,t.kq)(" CANVAS "),(0,t._)("div",{class:(0,o.C_)((0,a.SU)(d).e("canvas"))},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.urlList,((e,l)=>(0,t.wy)(((0,t.wg)(),(0,t.iD)("img",{ref_for:!0,ref:e=>w.value[l]=e,key:e,src:e,style:(0,o.j5)((0,a.SU)(D)),class:(0,o.C_)((0,a.SU)(d).e("img")),onLoad:q,onError:j,onMousedown:B},null,46,z)),[[r.F8,l===_.value]]))),128))],2),(0,t.WI)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var N=(0,_.Z)(I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]),x=n(2123);const T=(0,x.nz)(N),R=(0,g.o8)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,g.Cq)([String,Object])},previewSrcList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),W={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,k.hj)(e),close:()=>!0,show:()=>!0};var F=n(6274);const D=(e,l)=>{if(!i.C5||!e||!l)return!1;const n=e.getBoundingClientRect();let t;return t=l instanceof Element?l.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<t.bottom&&n.bottom>t.top&&n.right>t.left&&n.left<t.right};var H=n(7647);const L=["src","loading"],Y={key:0},A=(0,t.aZ)({name:"ElImage",inheritAttrs:!1}),q=(0,t.aZ)({...A,props:R,emits:W,setup(e,{emit:l}){const n=e;let r="";const{t:c}=(0,b.bU)(),u=(0,y.s3)("image"),d=(0,t.l1)(),v=(0,F.l)(),f=(0,a.iH)(),m=(0,a.iH)(!1),p=(0,a.iH)(!0),g=(0,a.iH)(!1),w=(0,a.iH)(),C=(0,a.iH)(),S=i.C5&&"loading"in HTMLImageElement.prototype;let _,h;const U=(0,t.Fl)((()=>[u.e("inner"),E.value&&u.e("preview"),p.value&&u.is("loading")])),O=(0,t.Fl)((()=>d.style)),z=(0,t.Fl)((()=>{const{fit:e}=n;return i.C5&&e?{objectFit:e}:{}})),E=(0,t.Fl)((()=>{const{previewSrcList:e}=n;return Array.isArray(e)&&e.length>0})),I=(0,t.Fl)((()=>{const{previewSrcList:e,initialIndex:l}=n;let t=l;return l>e.length-1&&(t=0),t})),N=(0,t.Fl)((()=>"eager"!==n.loading&&(!S&&"lazy"===n.loading||n.lazy))),x=()=>{i.C5&&(p.value=!0,m.value=!1,f.value=n.src)};function R(e){p.value=!1,m.value=!1,l("load",e)}function W(e){p.value=!1,m.value=!0,l("error",e)}function A(){D(w.value,C.value)&&(x(),B())}const q=(0,i.vA)(A,200,!0);async function j(){var e;if(!i.C5)return;await(0,t.Y3)();const{scrollContainer:l}=n;(0,k.kK)(l)?C.value=l:(0,o.HD)(l)&&""!==l?C.value=null!=(e=document.querySelector(l))?e:void 0:w.value&&(C.value=(0,H.JX)(w.value)),C.value&&(_=(0,s.ORN)(C,"scroll",q),setTimeout((()=>A()),100))}function B(){i.C5&&C.value&&q&&(null==_||_(),C.value=void 0)}function X(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Z(){E.value&&(h=(0,s.ORN)("wheel",X,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0,l("show"))}function $(){null==h||h(),document.body.style.overflow=r,g.value=!1,l("close")}function V(e){l("switch",e)}return(0,t.YP)((()=>n.src),(()=>{N.value?(p.value=!0,m.value=!1,B(),j()):x()})),(0,t.bv)((()=>{N.value?j():x()})),(e,l)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"container",ref:w,class:(0,o.C_)([(0,a.SU)(u).b(),e.$attrs.class]),style:(0,o.j5)((0,a.SU)(O))},[m.value?(0,t.WI)(e.$slots,"error",{key:0},(()=>[(0,t._)("div",{class:(0,o.C_)((0,a.SU)(u).e("error"))},(0,o.zw)((0,a.SU)(c)("el.image.error")),3)])):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[void 0!==f.value?((0,t.wg)(),(0,t.iD)("img",(0,t.dG)({key:0},(0,a.SU)(v),{src:f.value,loading:e.loading,style:(0,a.SU)(z),class:(0,a.SU)(U),onClick:Z,onLoad:R,onError:W}),null,16,L)):(0,t.kq)("v-if",!0),p.value?((0,t.wg)(),(0,t.iD)("div",{key:1,class:(0,o.C_)((0,a.SU)(u).e("wrapper"))},[(0,t.WI)(e.$slots,"placeholder",{},(()=>[(0,t._)("div",{class:(0,o.C_)((0,a.SU)(u).e("placeholder"))},null,2)]))],2)):(0,t.kq)("v-if",!0)],64)),(0,a.SU)(E)?((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[g.value?((0,t.wg)(),(0,t.j4)((0,a.SU)(T),{key:0,"z-index":e.zIndex,"initial-index":(0,a.SU)(I),infinite:e.infinite,"zoom-rate":e.zoomRate,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:$,onSwitch:V},{default:(0,t.w5)((()=>[e.$slots.viewer?((0,t.wg)(),(0,t.iD)("div",Y,[(0,t.WI)(e.$slots,"viewer")])):(0,t.kq)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,t.kq)("v-if",!0)],64)):(0,t.kq)("v-if",!0)],6))}});var j=(0,_.Z)(q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const B=(0,x.nz)(j)},9414:(e,l,n)=>{n(3241)}}]);
//# sourceMappingURL=558.9698464e.js.map