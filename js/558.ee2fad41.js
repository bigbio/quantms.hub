"use strict";(self["webpackChunkquantms_org"]=self["webpackChunkquantms_org"]||[]).push([[558],{8600:(e,l,a)=>{a.d(l,{F8:()=>B});var n=a(6252),t=a(2262),i=a(3577),o=a(3299),s=a(6309),r=a(9963),c=a(6409),u=a(7226),d="Expected a function";function v(e,l,a){var n=!0,t=!0;if("function"!=typeof e)throw new TypeError(d);return(0,u.Z)(a)&&(n="leading"in a?!!a.leading:n,t="trailing"in a?!!a.trailing:t),(0,c.Z)(e,l,{leading:n,maxWait:l,trailing:t})}const f=v;var m=a(4181),p=a(5781),g=a(5027),w=a(5450),S=a(5162);const k=(0,g.o8)({urlList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),b={close:()=>!0,switch:e=>(0,S.hj)(e),rotate:e=>(0,S.hj)(e)};var y=a(1446),C=a(7774),_=a(9143),h=a(4568),U=a(4309),N=a(5437);const O=["src"],x=(0,n.aZ)({name:"ElImageViewer"}),z=(0,n.aZ)({...x,props:k,emits:b,setup(e,{expose:l,emit:a}){const o=e,c={CONTAIN:{name:"contain",icon:(0,t.Xl)(p.FullScreen)},ORIGINAL:{name:"original",icon:(0,t.Xl)(p.ScaleToOriginal)}},{t:u}=(0,C.bU)(),d=(0,_.s3)("image-viewer"),{nextZIndex:v}=(0,h.Cn)(),g=(0,t.iH)(),w=(0,t.iH)([]),k=(0,t.B)(),b=(0,t.iH)(!0),y=(0,t.iH)(o.initialIndex),x=(0,t.XI)(c.CONTAIN),z=(0,t.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),E=(0,n.Fl)((()=>{const{urlList:e}=o;return e.length<=1})),I=(0,n.Fl)((()=>0===y.value)),T=(0,n.Fl)((()=>y.value===o.urlList.length-1)),R=(0,n.Fl)((()=>o.urlList[y.value])),W=(0,n.Fl)((()=>[d.e("btn"),d.e("prev"),d.is("disabled",!o.infinite&&I.value)])),F=(0,n.Fl)((()=>[d.e("btn"),d.e("next"),d.is("disabled",!o.infinite&&T.value)])),D=(0,n.Fl)((()=>{const{scale:e,deg:l,offsetX:a,offsetY:n,enableTransition:t}=z.value;let i=a/e,o=n/e;switch(l%360){case 90:case-270:[i,o]=[o,-i];break;case 180:case-180:[i,o]=[-i,-o];break;case 270:case-90:[i,o]=[-o,i];break}const s={transform:`scale(${e}) rotate(${l}deg) translate(${i}px, ${o}px)`,transition:t?"transform .3s":""};return x.value.name===c.CONTAIN.name&&(s.maxWidth=s.maxHeight="100%"),s})),H=(0,n.Fl)((()=>(0,S.hj)(o.zIndex)?o.zIndex:v()));function L(){A(),a("close")}function Y(){const e=f((e=>{switch(e.code){case U.EVENT_CODE.esc:o.closeOnPressEscape&&L();break;case U.EVENT_CODE.space:Z();break;case U.EVENT_CODE.left:V();break;case U.EVENT_CODE.up:P("zoomIn");break;case U.EVENT_CODE.right:M();break;case U.EVENT_CODE.down:P("zoomOut");break}})),l=f((e=>{const l=e.deltaY||e.deltaX;P(l<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})}));k.run((()=>{(0,s.ORN)(document,"keydown",e),(0,s.ORN)(document,"wheel",l)}))}function A(){k.stop()}function q(){b.value=!1}function j(e){b.value=!1,e.target.alt=u("el.image.error")}function B(e){if(b.value||0!==e.button||!g.value)return;z.value.enableTransition=!1;const{offsetX:l,offsetY:a}=z.value,n=e.pageX,t=e.pageY,i=f((e=>{z.value={...z.value,offsetX:l+e.pageX-n,offsetY:a+e.pageY-t}})),o=(0,s.ORN)(document,"mousemove",i);(0,s.ORN)(document,"mouseup",(()=>{o()})),e.preventDefault()}function X(){z.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Z(){if(b.value)return;const e=(0,N.uc)(c),l=Object.values(c),a=x.value.name,n=l.findIndex((e=>e.name===a)),t=(n+1)%e.length;x.value=c[e[t]],X()}function $(e){const l=o.urlList.length;y.value=(e+l)%l}function V(){I.value&&!o.infinite||$(y.value-1)}function M(){T.value&&!o.infinite||$(y.value+1)}function P(e,l={}){if(b.value)return;const{minScale:n,maxScale:t}=o,{zoomRate:i,rotateDeg:s,enableTransition:r}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...l};switch(e){case"zoomOut":z.value.scale>n&&(z.value.scale=Number.parseFloat((z.value.scale/i).toFixed(3)));break;case"zoomIn":z.value.scale<t&&(z.value.scale=Number.parseFloat((z.value.scale*i).toFixed(3)));break;case"clockwise":z.value.deg+=s,a("rotate",z.value.deg);break;case"anticlockwise":z.value.deg-=s,a("rotate",z.value.deg);break}z.value.enableTransition=r}return(0,n.YP)(R,(()=>{(0,n.Y3)((()=>{const e=w.value[0];(null==e?void 0:e.complete)||(b.value=!0)}))})),(0,n.YP)(y,(e=>{X(),a("switch",e)})),(0,n.bv)((()=>{var e,l;Y(),null==(l=null==(e=g.value)?void 0:e.focus)||l.call(e)})),l({setActiveItem:$}),(e,l)=>((0,n.wg)(),(0,n.j4)(n.lR,{to:"body",disabled:!e.teleported},[(0,n.Wm)(r.uT,{name:"viewer-fade",appear:""},{default:(0,n.w5)((()=>[(0,n._)("div",{ref_key:"wrapper",ref:g,tabindex:-1,class:(0,i.C_)((0,t.SU)(d).e("wrapper")),style:(0,i.j5)({zIndex:(0,t.SU)(H)})},[(0,n._)("div",{class:(0,i.C_)((0,t.SU)(d).e("mask")),onClick:l[0]||(l[0]=(0,r.iM)((l=>e.hideOnClickModal&&L()),["self"]))},null,2),(0,n.kq)(" CLOSE "),(0,n._)("span",{class:(0,i.C_)([(0,t.SU)(d).e("btn"),(0,t.SU)(d).e("close")]),onClick:L},[(0,n.Wm)((0,t.SU)(m.gn),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.Close))])),_:1})],2),(0,n.kq)(" ARROW "),(0,t.SU)(E)?(0,n.kq)("v-if",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("span",{class:(0,i.C_)((0,t.SU)(W)),onClick:V},[(0,n.Wm)((0,t.SU)(m.gn),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.ArrowLeft))])),_:1})],2),(0,n._)("span",{class:(0,i.C_)((0,t.SU)(F)),onClick:M},[(0,n.Wm)((0,t.SU)(m.gn),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.ArrowRight))])),_:1})],2)],64)),(0,n.kq)(" ACTIONS "),(0,n._)("div",{class:(0,i.C_)([(0,t.SU)(d).e("btn"),(0,t.SU)(d).e("actions")])},[(0,n._)("div",{class:(0,i.C_)((0,t.SU)(d).e("actions__inner"))},[(0,n.Wm)((0,t.SU)(m.gn),{onClick:l[1]||(l[1]=e=>P("zoomOut"))},{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.ZoomOut))])),_:1}),(0,n.Wm)((0,t.SU)(m.gn),{onClick:l[2]||(l[2]=e=>P("zoomIn"))},{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.ZoomIn))])),_:1}),(0,n._)("i",{class:(0,i.C_)((0,t.SU)(d).e("actions__divider"))},null,2),(0,n.Wm)((0,t.SU)(m.gn),{onClick:Z},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)((0,t.SU)(x).icon)))])),_:1}),(0,n._)("i",{class:(0,i.C_)((0,t.SU)(d).e("actions__divider"))},null,2),(0,n.Wm)((0,t.SU)(m.gn),{onClick:l[3]||(l[3]=e=>P("anticlockwise"))},{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.RefreshLeft))])),_:1}),(0,n.Wm)((0,t.SU)(m.gn),{onClick:l[4]||(l[4]=e=>P("clockwise"))},{default:(0,n.w5)((()=>[(0,n.Wm)((0,t.SU)(p.RefreshRight))])),_:1})],2)],2),(0,n.kq)(" CANVAS "),(0,n._)("div",{class:(0,i.C_)((0,t.SU)(d).e("canvas"))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.urlList,((e,l)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("img",{ref_for:!0,ref:e=>w.value[l]=e,key:e,src:e,style:(0,i.j5)((0,t.SU)(D)),class:(0,i.C_)((0,t.SU)(d).e("img")),onLoad:q,onError:j,onMousedown:B},null,46,O)),[[r.F8,l===y.value]]))),128))],2),(0,n.WI)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var E=(0,y.Z)(z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]),I=a(2123);const T=(0,I.nz)(E),R=(0,g.o8)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,g.Cq)([String,Object])},previewSrcList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),W={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,S.hj)(e),close:()=>!0,show:()=>!0};var F=a(6274);const D=(e,l)=>{if(!o.C5||!e||!l)return!1;const a=e.getBoundingClientRect();let n;return n=l instanceof Element?l.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right};var H=a(7647);const L=["src","loading"],Y={key:0},A=(0,n.aZ)({name:"ElImage",inheritAttrs:!1}),q=(0,n.aZ)({...A,props:R,emits:W,setup(e,{emit:l}){const a=e;let r="";const{t:c}=(0,C.bU)(),u=(0,_.s3)("image"),d=(0,n.l1)(),v=(0,F.l)(),f=(0,t.iH)(),m=(0,t.iH)(!1),p=(0,t.iH)(!0),g=(0,t.iH)(!1),w=(0,t.iH)(),k=(0,t.iH)(),b=o.C5&&"loading"in HTMLImageElement.prototype;let y,h;const U=(0,n.Fl)((()=>[u.e("inner"),x.value&&u.e("preview"),p.value&&u.is("loading")])),N=(0,n.Fl)((()=>d.style)),O=(0,n.Fl)((()=>{const{fit:e}=a;return o.C5&&e?{objectFit:e}:{}})),x=(0,n.Fl)((()=>{const{previewSrcList:e}=a;return Array.isArray(e)&&e.length>0})),z=(0,n.Fl)((()=>{const{previewSrcList:e,initialIndex:l}=a;let n=l;return l>e.length-1&&(n=0),n})),E=(0,n.Fl)((()=>"eager"!==a.loading&&(!b&&"lazy"===a.loading||a.lazy))),I=()=>{o.C5&&(p.value=!0,m.value=!1,f.value=a.src)};function R(e){p.value=!1,m.value=!1,l("load",e)}function W(e){p.value=!1,m.value=!0,l("error",e)}function A(){D(w.value,k.value)&&(I(),B())}const q=(0,o.vA)(A,200,!0);async function j(){var e;if(!o.C5)return;await(0,n.Y3)();const{scrollContainer:l}=a;(0,S.kK)(l)?k.value=l:(0,i.HD)(l)&&""!==l?k.value=null!=(e=document.querySelector(l))?e:void 0:w.value&&(k.value=(0,H.JX)(w.value)),k.value&&(y=(0,s.ORN)(k,"scroll",q),setTimeout((()=>A()),100))}function B(){o.C5&&k.value&&q&&(null==y||y(),k.value=void 0)}function X(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Z(){x.value&&(h=(0,s.ORN)("wheel",X,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0,l("show"))}function $(){null==h||h(),document.body.style.overflow=r,g.value=!1,l("close")}function V(e){l("switch",e)}return(0,n.YP)((()=>a.src),(()=>{E.value?(p.value=!0,m.value=!1,B(),j()):I()})),(0,n.bv)((()=>{E.value?j():I()})),(e,l)=>((0,n.wg)(),(0,n.iD)("div",{ref_key:"container",ref:w,class:(0,i.C_)([(0,t.SU)(u).b(),e.$attrs.class]),style:(0,i.j5)((0,t.SU)(N))},[m.value?(0,n.WI)(e.$slots,"error",{key:0},(()=>[(0,n._)("div",{class:(0,i.C_)((0,t.SU)(u).e("error"))},(0,i.zw)((0,t.SU)(c)("el.image.error")),3)])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[void 0!==f.value?((0,n.wg)(),(0,n.iD)("img",(0,n.dG)({key:0},(0,t.SU)(v),{src:f.value,loading:e.loading,style:(0,t.SU)(O),class:(0,t.SU)(U),onClick:Z,onLoad:R,onError:W}),null,16,L)):(0,n.kq)("v-if",!0),p.value?((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,i.C_)((0,t.SU)(u).e("wrapper"))},[(0,n.WI)(e.$slots,"placeholder",{},(()=>[(0,n._)("div",{class:(0,i.C_)((0,t.SU)(u).e("placeholder"))},null,2)]))],2)):(0,n.kq)("v-if",!0)],64)),(0,t.SU)(x)?((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[g.value?((0,n.wg)(),(0,n.j4)((0,t.SU)(T),{key:0,"z-index":e.zIndex,"initial-index":(0,t.SU)(z),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:$,onSwitch:V},{default:(0,n.w5)((()=>[e.$slots.viewer?((0,n.wg)(),(0,n.iD)("div",Y,[(0,n.WI)(e.$slots,"viewer")])):(0,n.kq)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,n.kq)("v-if",!0)],64)):(0,n.kq)("v-if",!0)],6))}});var j=(0,y.Z)(q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const B=(0,I.nz)(j)},9414:(e,l,a)=>{a(3241)}}]);
//# sourceMappingURL=558.ee2fad41.js.map