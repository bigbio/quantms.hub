"use strict";(self["webpackChunkquantms_org"]=self["webpackChunkquantms_org"]||[]).push([[75],{3624:(e,t,a)=>{a.d(t,{Zq:()=>q});var l=a(641),n=a(953),o=a(33),i=a(6668),s=a(7786),r=a(3751),c=a(3366),u=a(3149),d="Expected a function";function v(e,t,a){var l=!0,n=!0;if("function"!=typeof e)throw new TypeError(d);return(0,u.A)(a)&&(l="leading"in a?!!a.leading:l,n="trailing"in a?!!a.trailing:n),(0,c.A)(e,t,{leading:l,maxWait:t,trailing:n})}const f=v;var m=a(1361),p=a(8548),R=a(819),k=a(1254),g=a(2154);const b=(0,R.b_)({urlList:{type:(0,R.jq)(Array),default:()=>(0,k.f)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:(0,R.jq)(String)}}),y={close:()=>!0,switch:e=>(0,g.Et)(e),rotate:e=>(0,g.Et)(e)};var w=a(8396),C=a(7404),h=a(5980),E=a(4656),L=a(3344),x=a(5158);const I=["src","crossorigin"],z=(0,l.pM)({name:"ElImageViewer"}),_=(0,l.pM)({...z,props:b,emits:y,setup(e,{expose:t,emit:a}){var i;const c=e,u={CONTAIN:{name:"contain",icon:(0,n.IG)(p.FullScreen)},ORIGINAL:{name:"original",icon:(0,n.IG)(p.ScaleToOriginal)}},{t:d}=(0,C.Ym)(),v=(0,h.DU)("image-viewer"),{nextZIndex:R}=(0,E.YK)(),k=(0,n.KR)(),g=(0,n.KR)([]),b=(0,n.uY)(),y=(0,n.KR)(!0),w=(0,n.KR)(c.initialIndex),z=(0,n.IJ)(u.CONTAIN),_=(0,n.KR)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),F=(0,n.KR)(null!=(i=c.zIndex)?i:R()),O=(0,l.EW)((()=>{const{urlList:e}=c;return e.length<=1})),S=(0,l.EW)((()=>0===w.value)),A=(0,l.EW)((()=>w.value===c.urlList.length-1)),N=(0,l.EW)((()=>c.urlList[w.value])),T=(0,l.EW)((()=>[v.e("btn"),v.e("prev"),v.is("disabled",!c.infinite&&S.value)])),W=(0,l.EW)((()=>[v.e("btn"),v.e("next"),v.is("disabled",!c.infinite&&A.value)])),X=(0,l.EW)((()=>{const{scale:e,deg:t,offsetX:a,offsetY:l,enableTransition:n}=_.value;let o=a/e,i=l/e;switch(t%360){case 90:case-270:[o,i]=[i,-o];break;case 180:case-180:[o,i]=[-o,-i];break;case 270:case-90:[o,i]=[-i,o];break}const s={transform:`scale(${e}) rotate(${t}deg) translate(${o}px, ${i}px)`,transition:n?"transform .3s":""};return z.value.name===u.CONTAIN.name&&(s.maxWidth=s.maxHeight="100%"),s}));function K(){B(),a("close")}function Y(){const e=f((e=>{switch(e.code){case L.R.esc:c.closeOnPressEscape&&K();break;case L.R.space:Q();break;case L.R.left:D();break;case L.R.up:U("zoomIn");break;case L.R.right:P();break;case L.R.down:U("zoomOut");break}})),t=f((e=>{const t=e.deltaY||e.deltaX;U(t<0?"zoomIn":"zoomOut",{zoomRate:c.zoomRate,enableTransition:!1})}));b.run((()=>{(0,s.MLh)(document,"keydown",e),(0,s.MLh)(document,"wheel",t)}))}function B(){b.stop()}function M(){y.value=!1}function $(e){y.value=!1,e.target.alt=d("el.image.error")}function q(e){if(y.value||0!==e.button||!k.value)return;_.value.enableTransition=!1;const{offsetX:t,offsetY:a}=_.value,l=e.pageX,n=e.pageY,o=f((e=>{_.value={..._.value,offsetX:t+e.pageX-l,offsetY:a+e.pageY-n}})),i=(0,s.MLh)(document,"mousemove",o);(0,s.MLh)(document,"mouseup",(()=>{i()})),e.preventDefault()}function G(){_.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Q(){if(y.value)return;const e=(0,x.YD)(u),t=Object.values(u),a=z.value.name,l=t.findIndex((e=>e.name===a)),n=(l+1)%e.length;z.value=u[e[n]],G()}function j(e){const t=c.urlList.length;w.value=(e+t)%t}function D(){S.value&&!c.infinite||j(w.value-1)}function P(){A.value&&!c.infinite||j(w.value+1)}function U(e,t={}){if(y.value)return;const{minScale:l,maxScale:n}=c,{zoomRate:o,rotateDeg:i,enableTransition:s}={zoomRate:c.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":_.value.scale>l&&(_.value.scale=Number.parseFloat((_.value.scale/o).toFixed(3)));break;case"zoomIn":_.value.scale<n&&(_.value.scale=Number.parseFloat((_.value.scale*o).toFixed(3)));break;case"clockwise":_.value.deg+=i,a("rotate",_.value.deg);break;case"anticlockwise":_.value.deg-=i,a("rotate",_.value.deg);break}_.value.enableTransition=s}return(0,l.wB)(N,(()=>{(0,l.dY)((()=>{const e=g.value[0];(null==e?void 0:e.complete)||(y.value=!0)}))})),(0,l.wB)(w,(e=>{G(),a("switch",e)})),(0,l.sV)((()=>{var e,t;Y(),null==(t=null==(e=k.value)?void 0:e.focus)||t.call(e)})),t({setActiveItem:j}),(e,t)=>((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body",disabled:!e.teleported},[(0,l.bF)(r.eB,{name:"viewer-fade",appear:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{ref_key:"wrapper",ref:k,tabindex:-1,class:(0,o.C4)((0,n.R1)(v).e("wrapper")),style:(0,o.Tr)({zIndex:F.value})},[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(v).e("mask")),onClick:t[0]||(t[0]=(0,r.D$)((t=>e.hideOnClickModal&&K()),["self"]))},null,2),(0,l.Q3)(" CLOSE "),(0,l.Lk)("span",{class:(0,o.C4)([(0,n.R1)(v).e("btn"),(0,n.R1)(v).e("close")]),onClick:K},[(0,l.bF)((0,n.R1)(m.tk),null,{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.Close))])),_:1})],2),(0,l.Q3)(" ARROW "),(0,n.R1)(O)?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("span",{class:(0,o.C4)((0,n.R1)(T)),onClick:D},[(0,l.bF)((0,n.R1)(m.tk),null,{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.ArrowLeft))])),_:1})],2),(0,l.Lk)("span",{class:(0,o.C4)((0,n.R1)(W)),onClick:P},[(0,l.bF)((0,n.R1)(m.tk),null,{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.ArrowRight))])),_:1})],2)],64)),(0,l.Q3)(" ACTIONS "),(0,l.Lk)("div",{class:(0,o.C4)([(0,n.R1)(v).e("btn"),(0,n.R1)(v).e("actions")])},[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(v).e("actions__inner"))},[(0,l.bF)((0,n.R1)(m.tk),{onClick:t[1]||(t[1]=e=>U("zoomOut"))},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.ZoomOut))])),_:1}),(0,l.bF)((0,n.R1)(m.tk),{onClick:t[2]||(t[2]=e=>U("zoomIn"))},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.ZoomIn))])),_:1}),(0,l.Lk)("i",{class:(0,o.C4)((0,n.R1)(v).e("actions__divider"))},null,2),(0,l.bF)((0,n.R1)(m.tk),{onClick:Q},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)((0,n.R1)(z).icon)))])),_:1}),(0,l.Lk)("i",{class:(0,o.C4)((0,n.R1)(v).e("actions__divider"))},null,2),(0,l.bF)((0,n.R1)(m.tk),{onClick:t[3]||(t[3]=e=>U("anticlockwise"))},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.RefreshLeft))])),_:1}),(0,l.bF)((0,n.R1)(m.tk),{onClick:t[4]||(t[4]=e=>U("clockwise"))},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(p.RefreshRight))])),_:1})],2)],2),(0,l.Q3)(" CANVAS "),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(v).e("canvas"))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.urlList,((t,a)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("img",{ref_for:!0,ref:e=>g.value[a]=e,key:t,src:t,style:(0,o.Tr)((0,n.R1)(X)),class:(0,o.C4)((0,n.R1)(v).e("img")),crossorigin:e.crossorigin,onLoad:M,onError:$,onMousedown:q},null,46,I)),[[r.aG,a===w.value]]))),128))],2),(0,l.RG)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var F=(0,w.A)(_,[["__file","image-viewer.vue"]]),O=a(4769);const S=(0,O.GU)(F),A=(0,R.b_)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,R.jq)([String,Object])},previewSrcList:{type:(0,R.jq)(Array),default:()=>(0,k.f)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:(0,R.jq)(String)}}),N={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,g.Et)(e),close:()=>!0,show:()=>!0};var T=a(3205);const W=(e,t)=>{if(!i.oc||!e||!t)return!1;const a=e.getBoundingClientRect();let l;return l=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},a.top<l.bottom&&a.bottom>l.top&&a.right>l.left&&a.left<l.right};var X=a(1027);const K=["src","loading","crossorigin"],Y={key:0},B=(0,l.pM)({name:"ElImage",inheritAttrs:!1}),M=(0,l.pM)({...B,props:A,emits:N,setup(e,{emit:t}){const a=e;let r="";const{t:c}=(0,C.Ym)(),u=(0,h.DU)("image"),d=(0,l.OA)(),v=(0,T.O)(),f=(0,n.KR)(),m=(0,n.KR)(!1),p=(0,n.KR)(!0),R=(0,n.KR)(!1),k=(0,n.KR)(),b=(0,n.KR)(),y=i.oc&&"loading"in HTMLImageElement.prototype;let w,E;const L=(0,l.EW)((()=>[u.e("inner"),z.value&&u.e("preview"),p.value&&u.is("loading")])),x=(0,l.EW)((()=>d.style)),I=(0,l.EW)((()=>{const{fit:e}=a;return i.oc&&e?{objectFit:e}:{}})),z=(0,l.EW)((()=>{const{previewSrcList:e}=a;return Array.isArray(e)&&e.length>0})),_=(0,l.EW)((()=>{const{previewSrcList:e,initialIndex:t}=a;let l=t;return t>e.length-1&&(l=0),l})),F=(0,l.EW)((()=>"eager"!==a.loading&&(!y&&"lazy"===a.loading||a.lazy))),O=()=>{i.oc&&(p.value=!0,m.value=!1,f.value=a.src)};function A(e){p.value=!1,m.value=!1,t("load",e)}function N(e){p.value=!1,m.value=!0,t("error",e)}function B(){W(k.value,b.value)&&(O(),q())}const M=(0,i.k3)(B,200,!0);async function $(){var e;if(!i.oc)return;await(0,l.dY)();const{scrollContainer:t}=a;(0,g.vq)(t)?b.value=t:(0,o.Kg)(t)&&""!==t?b.value=null!=(e=document.querySelector(t))?e:void 0:k.value&&(b.value=(0,X.Bo)(k.value)),b.value&&(w=(0,s.MLh)(b,"scroll",M),setTimeout((()=>B()),100))}function q(){i.oc&&b.value&&M&&(null==w||w(),b.value=void 0)}function G(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Q(){z.value&&(E=(0,s.MLh)("wheel",G,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",R.value=!0,t("show"))}function j(){null==E||E(),document.body.style.overflow=r,R.value=!1,t("close")}function D(e){t("switch",e)}return(0,l.wB)((()=>a.src),(()=>{F.value?(p.value=!0,m.value=!1,q(),$()):O()})),(0,l.sV)((()=>{F.value?$():O()})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",{ref_key:"container",ref:k,class:(0,o.C4)([(0,n.R1)(u).b(),e.$attrs.class]),style:(0,o.Tr)((0,n.R1)(x))},[m.value?(0,l.RG)(e.$slots,"error",{key:0},(()=>[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("error"))},(0,o.v_)((0,n.R1)(c)("el.image.error")),3)])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[void 0!==f.value?((0,l.uX)(),(0,l.CE)("img",(0,l.v6)({key:0},(0,n.R1)(v),{src:f.value,loading:e.loading,style:(0,n.R1)(I),class:(0,n.R1)(L),crossorigin:e.crossorigin,onClick:Q,onLoad:A,onError:N}),null,16,K)):(0,l.Q3)("v-if",!0),p.value?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,o.C4)((0,n.R1)(u).e("wrapper"))},[(0,l.RG)(e.$slots,"placeholder",{},(()=>[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("placeholder"))},null,2)]))],2)):(0,l.Q3)("v-if",!0)],64)),(0,n.R1)(z)?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[R.value?((0,l.uX)(),(0,l.Wv)((0,n.R1)(S),{key:0,"z-index":e.zIndex,"initial-index":(0,n.R1)(_),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:j,onSwitch:D},{default:(0,l.k6)((()=>[e.$slots.viewer?((0,l.uX)(),(0,l.CE)("div",Y,[(0,l.RG)(e.$slots,"viewer")])):(0,l.Q3)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,l.Q3)("v-if",!0)],64)):(0,l.Q3)("v-if",!0)],6))}});var $=(0,w.A)(M,[["__file","image.vue"]]);const q=(0,O.GU)($)},8746:(e,t,a)=>{a(6422)}}]);
//# sourceMappingURL=75.6d9ed603.js.map